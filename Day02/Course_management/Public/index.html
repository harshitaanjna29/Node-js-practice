<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Course Management System</title>
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>
        <h1>Welcome to the Course Management System</h1>
        <!--  form to add new Course -->
        <form id="courseForm">
            <input type="text" id="title" placeholder="Course Name" required/>
            <button type="submit">Add Course</button>
        </form>

        <!--  list to display all the Course -->

        <ul id="courseList"></ul>

        <script>
            // function to fetch and display courses
            function loadcourses() {
                fetch('/courses')  // send GET request to fetch courses
                    .then(response => response.json())  // parse JSON response
                    .then(courses => {
                        const courseList = document.getElementById('courseList');
                        courseList.innerHTML = '';   // clear existing list

                        // add each course to the list
                        courses.forEach(course => {
                            const li = document.createElement('li');
                            li.textContent = course.title;
                            courseList.appendChild(li);
                        });
                    });
            }

            // handle form submission to add new course
            document.getElementById('courseForm').addEventListener('submit', function(event) {
                event.preventDefault();  // prevent default form submission

                const title = document.getElementById('title').value;

                fetch('/courses', {  // send POST request to add new course
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ title })
                })
                .then(response => response.json())
                .then(data => {
                    document.getElementById('title').value = '';  // clear input field
                    loadcourses();  // reload the course list
                });
            });
            // initial load of courses
            loadcourses();
        </script>
    </body>
</html>